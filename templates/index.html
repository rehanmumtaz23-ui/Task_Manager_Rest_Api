<!DOCTYPE html>
<html>
<head>
    <title>Task Manager</title>

    <style>
        body {
            margin: 0;
            font-family: Arial, sans-serif;
            background: url("https://images.unsplash.com/photo-1507525428034-b723cf961d3e") no-repeat center center fixed;
            background-size: cover;
            color: white;
        }

        .overlay {
            background: rgba(0, 0, 0, 0.55);
            min-height: 100vh;
            padding-top: 50px;
        }

        .container {
            width: 500px;
            margin: auto;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(8px);
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 0 25px rgba(0,0,0,0.6);
        }

        h1 {
            text-align: center;
            margin-bottom: 10px;
        }

        .quote {
            text-align: center;
            font-style: italic;
            margin-bottom: 20px;
            color: #f1f1f1;
        }

        input {
            width: 70%;
            padding: 10px;
            border-radius: 8px;
            border: none;
            margin-bottom: 10px;
        }

        button {
            padding: 10px 15px;
            border-radius: 8px;
            border: none;
            cursor: pointer;
            margin: 5px 0;
            font-weight: bold;
        }

        .add-btn {
            background: #00c853;
            color: white;
        }

        .delete-btn {
            background: #d50000;
            color: white;
        }

        .complete-btn {
            background: #2962ff;
            color: white;
        }

        ul {
            list-style: none;
            padding: 0;
        }

        li {
            background: rgba(255,255,255,0.15);
            padding: 10px;
            border-radius: 8px;
            margin-bottom: 8px;
        }

        .completed {
            text-decoration: line-through;
            color: #ccc;
        }

        .footer {
            text-align: center;
            margin-top: 20px;
            font-size: 14px;
            opacity: 0.8;
        }

    </style>
</head>
<body>

<div class="overlay">
<div class="container">

    <h1>Task Manager</h1>

    <div class="quote" id="quote"></div>

    <input type="text" id="title" placeholder="Enter new task">
    <button class="add-btn" onclick="addTask()">Add Task</button>

    <hr>

    <h3>Your Tasks</h3>
    <ul id="taskList"></ul>

    <div class="footer">
        Developed by Rehan Mumtaz 
    </div>

</div>
</div>

<script>

const API = window.location.origin;

const quotes = [
    "Discipline equals freedom.",
    "Small daily improvements lead to massive results.",
    "Consistency beats motivation.",
    "Your future is built by what you do today.",
    "Push yourself. No one else will do it for you."
];

function loadQuote() {
    const random = quotes[Math.floor(Math.random() * quotes.length)];
    document.getElementById("quote").innerText = random;
}

async function loadTasks() {
    const response = await fetch(API + "/task");
    const data = await response.json();

    const list = document.getElementById("taskList");
    list.innerHTML = "";

    data.forEach(task => {
        const li = document.createElement("li");

        li.className = task.completed ? "completed" : "";

        li.innerHTML = `
            <strong>ID:</strong> ${task.id} <br>
            <strong>Title:</strong> ${task.title} <br>
            <strong>Status:</strong> ${task.completed ? "Completed" : "Pending"} <br>
            <button class="complete-btn" onclick="completeTask(${task.id})">Complete</button>
            <button class="delete-btn" onclick="deleteTask(${task.id})">Delete</button>
        `;

        list.appendChild(li);
    });
}

async function addTask() {
    const titleInput = document.getElementById("title");
    const title = titleInput.value;

    if (!title) {
        alert("Please enter a task");
        return;
    }

    await fetch(API + "/task", {
        method: "POST",
        headers: {
            "Content-Type": "application/json"
        },
        body: JSON.stringify({ title: title })
    });

    titleInput.value = "";
    loadTasks();
}

async function deleteTask(id) {
    await fetch(API + "/task/" + id, {
        method: "DELETE"
    });

    loadTasks();
}

async function completeTask(id) {
    await fetch(API + "/task/" + id + "/complete", {
        method: "PATCH"
    });

    loadTasks();
}

loadQuote();
loadTasks();

</script>

</body>
</html>
